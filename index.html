<!DOCTYPE html>
<html>
    <head>
        <meta charset="UTF-8">
        <title>Rock Paper Scissors</title>
        <link rel="stylesheet" href="./style.css">
    </head>

    <body>
        <h1>Rock Paper Scissors</h1>
        <h3> Make Your Choice</h3>
        <div class="buttons">
            <button id="rock" class="rps rock"></button>
            <button id="paper" class="rps paper"></button>
            <button id="scissors" class="rps scissors"></button>
        </div>

        <div class="message"> </div>

        <div class="results-row">
            <div class="results">
                <div class="score computer">0</div>
                <div>Computer</div>
            </div>
            <div class="results">
                <div class="score player">0</div>
                <div>Player</div>
            </div>
        </div>

        <div>
            <button class="replay">Reset</button>
        </div>

        <script>
            const rps = document.querySelectorAll('.rps');
            rps.forEach(choice => choice.addEventListener("click", calculateWinner));
            const replay = document.querySelector(".replay");
            replay.addEventListener("click", reset);

            function getPlayerChoice(selection){
                return (selection.target.id);
            }

            function getComputerChoice() {
                let randomInt = Math.floor(Math.random() * 3 + 1);

                if(randomInt === 1){
                    return ("rock")
                }
                else if(randomInt === 2){
                    return ("paper")
                }
                else {
                    return ("scissors")
                }
            }

            function calculateWinner(selection) {
                let player = getPlayerChoice(selection);
                let computer = getComputerChoice();
                const results = document.querySelector(".message");
                let computerScore = parseInt(document.querySelector(".computer").innerHTML);
                let playerScore = parseInt(document.querySelector(".player").innerHTML);
                
                if((computerScore < 5) && (playerScore < 5)){
                    if(player === "rock") {
                        if(computer === "rock") {
                            results.innerHTML = "It is a tie!";
                        }
                        else if(computer === "paper") {
                            results.innerHTML = "One point for computer! Paper beats Rock";
                            computerScore++;
                            document.querySelector(".computer").innerHTML = computerScore;
                        }
                        else {
                            results.innerHTML = "One point for player! Rock beats Scissors";
                            playerScore++;
                            document.querySelector(".player").innerHTML = playerScore;
                        }
                    }

                    else if(player === "paper") {
                        if(computer === "paper") {
                            results.innerHTML = "It is a tie!";
                        }
                        else if(computer === "scissors") {
                            results.innerHTML = "One point for computer! Scissors beat Paper";
                            computerScore++;
                            document.querySelector(".computer").innerHTML = computerScore;
                        }
                        else {
                            results.innerHTML = "One point for player! Paper beats Rock";
                            playerScore++;
                            document.querySelector(".player").innerHTML = playerScore;
                        }
                    }

                    else {
                        if(computer === "scissors") {
                            results.innerHTML = "It is a tie!";
                        }
                        else if(computer === "rock") {
                            results.innerHTML = "One point for computer! Rock beats Scissors";
                            computerScore++;
                            document.querySelector(".computer").innerHTML = computerScore;
                        }
                        else {
                            results.innerHTML = "One point for player! Scissors beat Paper";
                            playerScore++;
                            document.querySelector(".player").innerHTML = playerScore;
                        }
                    }
                }

                if(playerScore === 5){
                    results.innerHTML = "Player wins! Congratulations"
                }
                if(computerScore === 5){
                    results.innerHTML = "Computer wins! Better luck next time"
                }
            }

            function reset(){
                document.querySelector(".message").innerHTML = "";
                document.querySelector(".computer").innerHTML = 0;
                document.querySelector(".player").innerHTML = 0;

            }


        </script>
    </body>
</html>